---
layout: post
type: tech
date: 2023-06-15 12:30
category: Blog
title: Unityì™€ Android Java Class
subtitle: Unityì—ì„œ AndroidJavaClass ë¥¼ ì´ìš©í•˜ì—¬ Toast Message ë„ìš°ê¸°
writer: KimYC1223
post-header: true
image: title.png
header-img: bg.png
tags: [Unity]
draft : false
---

{% capture img_url %}/assets/blog/{{page.date | date: "%Y-%m-%d"}}-TechPost{% endcapture %}

# ğŸ”¸ Unityì™€ AndroidJavaClass

Unityì—ì„œ ì•ˆë“œë¡œì´ë“œ ë„¤ì´í‹°ë¸Œ ê¸°ëŠ¥ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œëŠ” ë³´í†µ `AndroidJavaClass`ì™€ `AndroidJavaObject`ë¥¼ ì‚¬ìš©í•œë‹¤.

## ğŸ”¹ AndroidJavaClass:

- Java í´ë˜ìŠ¤ë¥¼ ë‚˜íƒ€ë‚´ëŠ” Unity í´ë˜ìŠ¤ì´ë‹¤.
- ì•ˆë“œë¡œì´ë“œ í”Œë«í¼ì—ì„œ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê³ ì í•  ë•Œ ì‚¬ìš©ëœë‹¤.
- ì•ˆë“œë¡œì´ë“œ SDKì˜ í´ë˜ìŠ¤ë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ì—¬ ì •ì  ë©”ì„œë“œë‚˜ í•„ë“œì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.
- Java í´ë˜ìŠ¤ì˜ ì´ë¦„ì„ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë˜ë©°, í•´ë‹¹ í´ë˜ìŠ¤ì˜ ì •ì  ë©”ì„œë“œ ë° í•„ë“œì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

## ğŸ”¹ AndroidJavaObject:

- Java ê°ì²´ë¥¼ ë‚˜íƒ€ë‚´ëŠ” Unity í´ë˜ìŠ¤ì´ë‹¤.
- ìƒˆë¡œìš´ Java ê°ì²´ë¥¼ ìƒì„±í•˜ê±°ë‚˜, ê¸°ì¡´ì— ìƒì„±ëœ Java ê°ì²´ì— ì ‘ê·¼í•˜ê³ ì í•  ë•Œ ì‚¬ìš©ëœë‹¤.
- AndroidJavaClassë¥¼ í†µí•´ ìƒì„±ëœ Java í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ì—¬ ì‚¬ìš©í•œë‹¤.
- Java ê°ì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œì— ì ‘ê·¼í•˜ê³  í˜¸ì¶œí•  ìˆ˜ ìˆìœ¼ë©°, í•„ë“œ ê°’ì„ ê°€ì ¸ì˜¤ê±°ë‚˜ ì„¤ì •í•  ìˆ˜ë„ ìˆë‹¤.

<br>

ì´ ë‘ í´ë˜ìŠ¤ëŠ” Unityì—ì„œ ì•ˆë“œë¡œì´ë“œì˜ ë„¤ì´í‹°ë¸Œ ê¸°ëŠ¥ì„ í˜¸ì¶œí•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ë©°,

**Java í´ë˜ìŠ¤ì™€ ê°ì²´ì— ì§ì ‘ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.**

<br>

ì •ë¦¬í•˜ë©´,

`AndroidJavaClass`ëŠ” **ì •ì  ë©”ì„œë“œì™€ í•„ë“œ**ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ê³ ,

`AndroidJavaObject`ëŠ” **ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œì™€ í•„ë“œ**ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.

---

ì´ë¥¼ ì´ìš©í•˜ì—¬, ê°„ë‹¨í•˜ê²Œ Toast Messageë¥¼ ë„ìš°ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ì•˜ë‹¤.

``` cs
public static void ShowAlert (string message) {
    AndroidJavaClass  unityPlayer   = new AndroidJavaClass("com.unity3d.player.UnityPlayer");
    AndroidJavaClass  toastClass    = new AndroidJavaClass("android.widget.Toast") ;
    AndroidJavaObject unityActivity = unityPlayer.GetStatic<AndroidJavaObject> ("currentActivity");
    unityActivity.Call ("runOnUiThread", new AndroidJavaRunnable( () =>
    {
        AndroidJavaObject toastObject = toastClass.Callstatic<AndroidJavaObject>("makeText", unityActivity, message, 0);
        toastObject.Call("show");
    }));
}
```

í˜„ì¬ ì‹¤í–‰ë˜ê³  ìˆëŠ” ì•¡í‹°ë¹„í‹°ë¥¼ ê°€ì ¸ì™€ì„œ, `android.widget.Toast` íŒ¨í‚¤ì§€ì˜ static ë©”ì„œë“œì¸ `makeText` ë¥¼ í˜¸ì¶œí•˜ëŠ” ì½”ë“œì´ë‹¤.

![]({{img_url}}/img_0.png)

ì´ëŸ°ì‹ìœ¼ë¡œ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ, `ShowAlert("MessageMessage")` ë¼ê³  í˜¸ì¶œí•œë‹¤ë©´, ìœ„ì™€ ê°™ì€ Toast ë©”ì„¸ì§€ê°€ ì¿¨ë¦­ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.


# ğŸ”¸ ì˜¤íƒ€ê°€ ë‚œë‹¤ë©´?

Callstaticì´ë¼ëŠ” ë©”ì„œë“œì— ë©”ì„œë“œ ì´ë¦„ì„ stringìœ¼ë¡œ í˜¸ì¶œ í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆëŠ”ë°,

ê·¸ë ‡ë‹¤ë©´ ì´ Callstaticì— ì˜¤íƒ€ê°€ ë‚œ stringì„ ì§‘ì–´ ë„£ìœ¼ë©´ ì–´ë–»ê²Œ ë ê¹Œ?

**í™•ì¸ ê²°ê³¼ ì•„ë¬´ì¼ë„ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤.** ì½”ë“œë¥¼ ì•„ë˜ì²˜ëŸ¼ ë³€ê²½í•˜ê³  ( `makeText` -> `makeText2` )

```cs
toastClass.Callstatic<AndroidJavaObject>("makeText2", unityActivity, message, 0);
```

ë¹Œë“œ í›„ ì‹¤í–‰í•œ í›„, ë©”ì„œë“œë¥¼ ì‹¤í–‰í•˜ë©´....ì•„ë¬´ì¼ë„ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤. Logcatì—ì„œë„ í™•ì¸ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤.

```
2023-03-20 17:50:43.955 28390-28390/? I/ViewRootImpl@750Id0e[UnityPlayerActivity]: ViewPostIme pointer 0
2023-03-20 17:50:44.029 28390-28390/? I/ViewRootImpl@7501d0e[UnityPlayerActivity]: ViewPostIme pointer 1
```